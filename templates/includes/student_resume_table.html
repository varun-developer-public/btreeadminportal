{% load custom_filter %}
<div id="{{ table_id }}" class="info-card mt-4 student-resume-table" style="display: none;">
    <div class="info-header">
        <h4 class="info-title"><i class="fas fa-users"></i> {{ title }}</h4>
    </div>
    <div class="table-responsive">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Student ID</th>
                    <th>Student Name</th>
                    <th>Course</th>
                    <th>Phone Number</th>
                    <th>Percentage</th>
                </tr>
            </thead>
            <tbody>
                {% for student in students %}
                <tr>
                    <td>{{ student.student_id }}</td>
                    <td>{{ student.first_name }} {{ student.last_name|default:'' }}</td>
                    <td>{{ courses_dict|get_item:student.course_id|default:"-" }}</td>
                    <td>{{ student.phone|default:"-" }}</td>
                    <td>{{ student.course_percentage|default:"0" }}%</td>
                </tr>
                {% empty %}
                <tr><td colspan="5" class="no-data">No students in this category.</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% if students.has_other_pages %}
    <div class="pagination">
        <span class="step-links">
            {% if students.has_previous %}
                <a href="?{{ page_param }}={{ students.previous_page_number }}">&laquo; previous</a>
            {% endif %}

            <span class="current">
                Page {{ students.number }} of {{ students.paginator.num_pages }}.
            </span>

            {% if students.has_next %}
                <a href="?{{ page_param }}={{ students.next_page_number }}">next &raquo;</a>
            {% endif %}
        </span>
    </div>
    {% endif %}
</div>